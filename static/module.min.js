"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var l={moduleLoad:{},moduleMissingName:[],requireData:{},monitorQuote:{},moduleEntrust:[],moduleStartUp:{},moduleJson:{}},a={isModuleJson:!1},d={loadError:"异常：无法加载'{{name}}'模块，路径错误。",loadAbnormal:"异常：当前模块库无'{{name}}'模块,输入module.getModuleList()可以查询当前load的所有模块"},m={getDom:function(e){return document.getElementsByTagName(e)},isType:function(e,t){for(var o=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error","Symbol"],n={},r=0,u=o.length;r<u;r++)n["[object "+o[r]+"]"]=o[r].toLowerCase();return null==e?t?e+""===t:e+"":"object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e?t?n[n.toString.call(e)]===t.toLowerCase():n[n.toString.call(e)]||"object":t?(void 0===e?"undefined":_typeof(e))===t.toLowerCase():void 0===e?"undefined":_typeof(e)},scriptUrl:function(e,t){var o=0;return l.moduleJson[t].cdn&&0<l.moduleJson[t].cdn.length&&~~l.moduleJson[t].cdnNum<=l.moduleJson[t].cdn.length-1?(o=~~l.moduleJson[t].cdnNum,"set"===e&&(l.moduleJson[t].cdnNum=1+~~l.moduleJson[t].cdnNum),l.moduleJson[t].cdn[o]):l.moduleJson[t].src},isUrlName:function(e){var t=e.replace(/^\s*|\s*$/gm,""),o=/(\/)*\.(js|css)(\?)?/.test(t);return o?t:o},urlToName:function(e){var t=[];return this.isUrlName(e)?(t=e.split(".js")[0].split("/"))[t.length-1]:e},getModuleData:function(e){var t=[];for(var o in e)t.push(o);return t},isUrlScript:function(e){return/\.js[0-9A-Za-z|\=|\-|\?]*$/.test(e)},isUrlCss:function(e){return/\.css[0-9A-Za-z|\=|\-|\?]*$/.test(e)}},u={excludeLoad:function(e,t){var o=m.getDom("script"),n=m.getDom("link");if(!m.isType(e,"string"))return!1;if(0===e.replace(/^\s*|\s*$/gm,"").length)return!1;if(!t&&!l.moduleJson[e])return console.error(d.loadAbnormal.replace(/\{\{name\}\}/gm,e)),!1;if(!t&&l.moduleJson[e]&&(t=m.scriptUrl("get",e)),m.isUrlScript(t)){for(var r=0,u=o.length;r<u;r++)if(o[r].src===t||~o[r].src.indexOf(t))return!0}else if(m.isUrlCss(t))for(r=0,u=n.length;r<u;r++)if(n[r].href===t||~n[r].href.indexOf(t))return!0;return this.addScriptDom(e,t),!0},addScriptDom:function(t,e){var o={},n={},r=m.getDom("head")[0],u=this;function i(){var e={};!l.moduleLoad[t]&&l.moduleMissingName.length&&((e=l.moduleMissingName.splice(0,1))[0].moduleName=t,a.isModuleJson?u.createModule(e[0]):u.addJsonEntrust(e[0])),u.monitorLoad(t),o.onload=o.onreadystatechange=o.onerror=null}function s(){m.scriptUrl("set",t),o.onload=o.onreadystatechange=o.onerror=null,o.parentNode.removeChild(o),e!==l.moduleJson[t].src?u.excludeLoad(t):console.error(d.loadError.replace(/\{\{name\}\}/gm,t))}m.isUrlScript(e)?((o=document.createElement("script")).src=e,o.type="text/javascript",o.charset="UTF-8",o.async="true",r.appendChild(o),~navigator.userAgent.indexOf("MSIE")?o.onreadystatechange=function(e){"loaded"==this.readyState&&(l.moduleLoad[t]||l.moduleMissingName.length?i():s())}:(o.onload=function(){i()},o.onerror=function(){s()})):((n=document.createElement("link")).href=e,n.rel="stylesheet",n.type="text/css",r.appendChild(n))},addJsonEntrust:function(e){l.moduleEntrust.push(e)},cleanJsonEntrust:function(){for(var e=0,t=l.moduleEntrust.length;e<t;e++)this.createModule(l.moduleEntrust[e]);l.moduleEntrust=[]},createModule:function(e){for(var t="",o=[],n=0,r=e.quote.length;n<r;n++)c.inquireItem(e.quote[n])||(m.isUrlName(e.quote[n])?(o=(t=e.quote[n]).split(".js")[0].split("/"),this.excludeLoad(o[o.length-1],t)):(this.excludeLoad(e.quote[n]),l.moduleJson[e.quote[n]]&&l.moduleJson[e.quote[n]].css&&this.excludeLoad(e.quote[n],l.moduleJson[e.quote[n]].css)));this.registeredList(e),this.monitorRely(e.moduleName,e.quote),e.isDefaultStart&&(l.moduleStartUp[e.moduleName]=!0,this.monitorLoad(e.moduleName))},registeredList:function(e){var t=!!l.moduleLoad[e.moduleName];return l.moduleLoad[e.moduleName]={defaultFun:e.fun,rely:e.quote,exports:{}},!t},monitorLoad:function(e){var t=[];for(var o in l.moduleStartUp)u(o)&&t.push(o);for(var n=0,r=t.length;n<r;n++)l.moduleStartUp[t[n]]&&(l.moduleLoad[t[n]].defaultFun(),delete l.moduleStartUp[t[n]]);function u(e){if(m.isType(l.monitorQuote[e],"array")){for(var t=0,o=l.monitorQuote[e].length;t<o;t++){if(!l.moduleLoad[l.monitorQuote[e][t]])return!1;if(!u(l.monitorQuote[e][t]))return!1}return!0}return!1}},monitorRely:function(e,t){var o=[],n="";if(!m.isType(e,"string")||!m.isType(t,"array"))return!1;for(var r=0,u=t.length;r<u;r++)m.isUrlCss(t[r])||(n=m.urlToName(t[r]),o.push(n));l.monitorQuote[e]=o}},c={list:["exports"],init:function(){for(var e=0,t=c.list.length;e<t;e++)c[c.list[e]](e)},inquireItem:function(e){for(var t=0,o=this.list.length;t<o;t++)if(this.list[t]===e)return!0;return!1},addModule:function(e,t,o,n){define(e,t,o,n)},exports:function(e){this.addModule(this.list[e],[],function(){return{}})}};window.module={getModuleQuote:function(){return l.monitorQuote},getModuleDepot:function(){return m.getModuleData(l.moduleJson)},getModuleList:function(){return m.getModuleData(l.moduleLoad)}},window.define=function(e,t,o,n){var r={};m.isType(e,"function")&&(r.quote=[],r.fun=e,r.isDefaultStart=!!t),m.isType(e,"array")&&(r.quote=e,r.fun=t,r.isDefaultStart=!!o),m.isType(e,"string")&&(r.moduleName=e,m.isType(t,"array")?(r.quote=t,r.fun=o,r.isDefaultStart=!!n):(r.quote=[],r.fun=t,r.isDefaultStart=!!o)),r.moduleName?a.isModuleJson?u.createModule(r):u.addJsonEntrust(r):l.moduleMissingName.push(r)},window.define.amd={},window.require=function(){var e,t=/^\!/.test(arguments[0]),o=m.urlToName(arguments[0].replace(/^\!/,"")),n=!1,r={},u=[],i=Array.prototype.slice.call(arguments,1);if(!m.isType(o,"string"))return!1;if(!l.moduleLoad[o])return!1;if(t&&l.requireData[o])return l.requireData[o];for(var s=0,a=l.monitorQuote[o].length;s<a;s++)c.inquireItem(l.monitorQuote[o][s])&&("exports"===l.monitorQuote[o][s]&&(n=!0,r=window.require(l.monitorQuote[o][s])),u.push(r));for(s=0,a=i.length;s<a;s++)u.push(i[s]);return e=l.moduleLoad[o].defaultFun.apply(null,u),l.moduleLoad[o].exports=e,t&&!l.requireData[o]&&(l.requireData[o]=e),n?r:e},function(){var e=m.getDom("script"),t="";c.init();for(var o=0,n=e.length;o<n;o++)if(t=e[o].attributes["data-module"],/module(\.min)?.js\s*$/gm.test(e[o].src)){if(t){var r=new XMLHttpRequest;r.open("GET",t.nodeValue,!0),r.onreadystatechange=function(){if(4==r.readyState&&(200===r.status||304===r.status)){try{l.moduleJson=JSON.parse(r.responseText).library}catch(e){l.moduleJson={}}a.isModuleJson=!0,u.cleanJsonEntrust()}},r.send()}else a.isModuleJson=!0,u.cleanJsonEntrust();break}}()}();