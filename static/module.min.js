"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var e={moduleLoad:{},moduleMissingName:[],requireData:{},monitorQuote:{},moduleEntrust:[],moduleStartUp:{},moduleJson:{}},t={isModuleJson:!1},o={loadError:"异常：无法加载'{{name}}'模块，路径错误。",loadAbnormal:"异常：当前模块库无'{{name}}'模块,输入module.getModuleList()可以查询当前load的所有模块"},n={getDom:function(e){return document.getElementsByTagName(e)},isType:function(e,t){for(var o=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error","Symbol"],n={},r=0,u=o.length;r<u;r++)n["[object "+o[r]+"]"]=o[r].toLowerCase();return null==e?t?e+""===t:e+"":"object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e?t?n[n.toString.call(e)]===t.toLowerCase():n[n.toString.call(e)]||"object":t?(void 0===e?"undefined":_typeof(e))===t.toLowerCase():void 0===e?"undefined":_typeof(e)},scriptUrl:function(t,o){var n=0;return e.moduleJson[o].cdn&&e.moduleJson[o].cdn.length>0&&~~e.moduleJson[o].cdnNum<=e.moduleJson[o].cdn.length-1?(n=~~e.moduleJson[o].cdnNum,"set"===t&&(e.moduleJson[o].cdnNum=1+~~e.moduleJson[o].cdnNum),e.moduleJson[o].cdn[n]):e.moduleJson[o].src},isUrlName:function(e){return/(\/)*\.js(\?)?/.test(e.replace(/^\s*|\s*$/gm,""))},urlToName:function(e){var t=[];return this.isUrlName(e)?(t=e.split(".js")[0].split("/"))[t.length-1]:e},getModuleData:function(e){var t=[];for(var o in e)t.push(o);return t}},r={excludeLoad:function(t,r){var u=n.getDom("script");if(!n.isType(t,"string"))return!1;if(0===t.replace(/^\s*|\s*$/gm,"").length)return!1;if(!e.moduleJson[t]&&!r)return console.error(o.loadAbnormal.replace(/\{\{name\}\}/gm,t)),!1;!r&&e.moduleJson[t]&&(r=n.scriptUrl("get",t));for(var i=0,a=u.length;i<a;i++)if(u[i].src===r)return!0;return this.addScriptDom(t,r),!0},addScriptDom:function(r,u){var i=document.createElement("script"),a=this;function l(){var o={};!e.moduleLoad[r]&&e.moduleMissingName.length&&((o=e.moduleMissingName.splice(0,1))[0].moduleName=r,t.isModuleJson?a.createModule(o[0]):a.addJsonEntrust(o[0])),a.monitorLoad(r),i.onload=i.onreadystatechange=i.onerror=null}function s(){n.scriptUrl("set",r),i.onload=i.onreadystatechange=i.onerror=null,i.parentNode.removeChild(i),u!==e.moduleJson[r].src?a.excludeLoad(r):console.error(o.loadError.replace(/\{\{name\}\}/gm,r))}i.src=u,i.type="text/javascript",i.charset="UTF-8",i.async="true",n.getDom("head")[0].appendChild(i),~navigator.userAgent.indexOf("MSIE")?i.onreadystatechange=function(t){"loaded"==this.readyState&&(e.moduleLoad[r]||e.moduleMissingName.length?l():s())}:(i.onload=function(){l()},i.onerror=function(){s()})},addJsonEntrust:function(t){e.moduleEntrust.push(t)},cleanJsonEntrust:function(){for(var t=0,o=e.moduleEntrust.length;t<o;t++)this.createModule(e.moduleEntrust[t]);e.moduleEntrust=[]},createModule:function(t){for(var o="",r=[],i=0,a=t.quote.length;i<a;i++)u.inquireItem(t.quote[i])||(n.isUrlName(t.quote[i])?(r=(o=t.quote[i]).split(".js")[0].split("/"),this.excludeLoad(r[r.length-1],o)):this.excludeLoad(t.quote[i]));this.registeredList(t),this.monitorRely(t.moduleName,t.quote),t.isDefaultStart&&(e.moduleStartUp[t.moduleName]=!0)},registeredList:function(t){var o=!!e.moduleLoad[t.moduleName];return e.moduleLoad[t.moduleName]={defaultFun:t.fun,rely:t.quote,exports:{}},!o},monitorLoad:function(t){var o=[];for(var r in e.moduleStartUp)a(r)&&o.push(r);for(var u=0,i=o.length;u<i;u++)e.moduleStartUp[o[u]]&&(e.moduleLoad[o[u]].defaultFun(),delete e.moduleStartUp[o[u]]);function a(t){if(n.isType(e.monitorQuote[t],"array")){for(var o=0,r=e.monitorQuote[t].length;o<r;o++){if(!e.moduleLoad[e.monitorQuote[t][o]])return!1;if(!a(e.monitorQuote[t][o]))return!1}return!0}return!1}},monitorRely:function(t,o){var r=[],u="";if(!n.isType(t,"string")||!n.isType(o,"array"))return!1;for(var i=0,a=o.length;i<a;i++)u=n.urlToName(o[i]),r.push(u);e.monitorQuote[t]=r}},u={list:["exports"],init:function(){for(var e=0,t=u.list.length;e<t;e++)u[u.list[e]](e)},inquireItem:function(e){for(var t=0,o=this.list.length;t<o;t++)if(this.list[t]===e)return!0;return!1},addModule:function(e,t,o,n){define(e,t,o,n)},exports:function(e){this.addModule(this.list[e],[],function(){return{}})}};window.module={getModuleQuote:function(){return e.monitorQuote},getModuleDepot:function(){return n.getModuleData(e.moduleJson)},getModuleList:function(){return n.getModuleData(e.moduleLoad)}},window.define=function(o,u,i,a){var l={};n.isType(o,"function")&&(l.quote=[],l.fun=o,l.isDefaultStart=!!u),n.isType(o,"array")&&(l.quote=o,l.fun=u,l.isDefaultStart=!!i),n.isType(o,"string")&&(l.moduleName=o,n.isType(u,"array")?(l.quote=u,l.fun=i,l.isDefaultStart=!!a):(l.quote=[],l.fun=u,l.isDefaultStart=!!i)),l.moduleName?t.isModuleJson?r.createModule(l):r.addJsonEntrust(l):e.moduleMissingName.push(l)},window.define.amd={},window.require=function(){var t,o=/^\!/.test(arguments[0]),r=arguments[0].replace(/^\!/,""),i=!1,a={},l=[],s=Array.prototype.slice.call(arguments,1);if(!n.isType(r,"string"))return!1;if(!e.moduleLoad[r])return!1;if(o&&e.requireData[r])return e.requireData[r];for(var d=0,m=e.monitorQuote[r].length;d<m;d++)u.inquireItem(e.monitorQuote[r][d])&&("exports"===e.monitorQuote[r][d]&&(i=!0,a=this.require(e.monitorQuote[r][d])),l.push(a));for(d=0,m=s.length;d<m;d++)l.push(s[d]);return t=e.moduleLoad[r].defaultFun.apply(null,l),e.moduleLoad[r].exports=t,o&&!e.requireData[r]&&(e.requireData[r]=t),i?a:t},function(){var o=n.getDom("script"),i="";u.init();for(var a=0,l=o.length;a<l;a++)if(i=o[a].attributes["data-module"],/module(\.min)?.js\s*$/gm.test(o[a].src)){if(i){var s=new XMLHttpRequest;s.open("GET",i.nodeValue,!0),s.onreadystatechange=function(){if(4==s.readyState&&(200===s.status||304===s.status)){try{e.moduleJson=JSON.parse(s.responseText).library}catch(t){e.moduleJson={}}t.isModuleJson=!0,r.cleanJsonEntrust()}},s.send()}else t.isModuleJson=!0,r.cleanJsonEntrust();break}}()}();